{"version":3,"file":"ng-wormhole.umd.js.map","sources":["ng://ng-wormhole/lib/ng-wormhole.directive.ts","ng://ng-wormhole/lib/ng-wormhole.module.ts"],"sourcesContent":["import {\n  Directive,\n  Input,\n  ViewContainerRef,\n  TemplateRef,\n  EmbeddedViewRef,\n  AfterViewInit,\n  OnInit,\n  OnChanges,\n  SimpleChanges,\n  HostBinding,\n  Inject,\n  OnDestroy\n} from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\n\nfunction appendReducer<T extends Node>(target: T, node: Node): T {\n  target.appendChild(node);\n\n  return target;\n}\n\n@Directive({\n  selector: '[ngWormhole]' // tslint:disable-line\n})\nexport class NgWormholeDirective\n  implements AfterViewInit, OnInit, OnChanges, OnDestroy {\n  @Input()\n  ngWormholeRenderInPlace = false;\n\n  @Input()\n  ngWormhole: string | Element;\n\n  private embeddedViewRef: EmbeddedViewRef<any>;\n  private initialized = false;\n  private document: Document;\n\n  constructor(\n    private viewContainerRef: ViewContainerRef,\n    private templateRef: TemplateRef<any>,\n    @Inject(DOCUMENT) document: any\n  ) {\n    this.document = document;\n  }\n\n  get destinationElement(): Element | null {\n    if (this.ngWormholeRenderInPlace) {\n      return (\n        this.viewContainerRef.element &&\n        this.viewContainerRef.element.nativeElement\n      );\n    }\n\n    if (!this.ngWormhole) {\n      return null;\n    }\n\n    return typeof this.ngWormhole === 'string'\n      ? this.document.querySelector(this.ngWormhole)\n      : this.ngWormhole;\n  }\n\n  ngOnInit(): void {\n    this.embeddedViewRef = this.viewContainerRef.createEmbeddedView(\n      this.templateRef\n    );\n  }\n\n  ngAfterViewInit(): void {\n    this.appendToDestination();\n    this.initialized = true;\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (this.initialized) {\n      this.appendToDestination();\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.embeddedViewRef != null) {\n      this.embeddedViewRef.destroy();\n    }\n  }\n\n  private appendToDestination(): void {\n    let startingActiveElement = this.getActiveElement();\n    let destinationElement = this.destinationElement;\n\n    if (destinationElement == null) {\n      return;\n    }\n\n    let content = this.embeddedViewRef.rootNodes.reduce(\n      appendReducer,\n      this.document.createDocumentFragment()\n    );\n    if (destinationElement.nodeType === Node.COMMENT_NODE) {\n      destinationElement.parentNode.insertBefore(\n        content,\n        destinationElement.nextSibling\n      );\n    } else {\n      destinationElement.appendChild(content);\n    }\n\n    let resultingActiveElement = this.getActiveElement();\n    if (\n      startingActiveElement != null &&\n      resultingActiveElement !== startingActiveElement\n    ) {\n      (startingActiveElement as HTMLElement).focus();\n    }\n  }\n\n  private getActiveElement(): Element {\n    return this.document.activeElement;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { NgWormholeDirective } from './ng-wormhole.directive';\n\n@NgModule({\n  imports: [],\n  declarations: [NgWormholeDirective],\n  exports: [NgWormholeDirective]\n})\nexport class NgWormholeModule {}\n"],"names":["Directive","ViewContainerRef","TemplateRef","Inject","DOCUMENT","Input","NgModule"],"mappings":"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"}
