(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('@angular/common')) :
    typeof define === 'function' && define.amd ? define('ng-wormhole', ['exports', '@angular/core', '@angular/common'], factory) :
    (factory((global['ng-wormhole'] = {}),global.ng.core,global.ng.common));
}(this, (function (exports,core,common) { 'use strict';

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /**
     * @template T
     * @param {?} target
     * @param {?} node
     * @return {?}
     */
    function appendReducer(target, node) {
        target.appendChild(node);
        return target;
    }
    var NgWormholeDirective = (function () {
        function NgWormholeDirective(viewContainerRef, templateRef, document) {
            this.viewContainerRef = viewContainerRef;
            this.templateRef = templateRef;
            this.ngWormholeRenderInPlace = false;
            this.initialized = false;
            this.document = document;
        }
        Object.defineProperty(NgWormholeDirective.prototype, "destinationElement", {
            get: /**
             * @return {?}
             */ function () {
                if (this.ngWormholeRenderInPlace) {
                    return (this.viewContainerRef.element &&
                        this.viewContainerRef.element.nativeElement);
                }
                if (!this.ngWormhole) {
                    return null;
                }
                return typeof this.ngWormhole === 'string'
                    ? this.document.querySelector(this.ngWormhole)
                    : this.ngWormhole;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        NgWormholeDirective.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                this.embeddedViewRef = this.viewContainerRef.createEmbeddedView(this.templateRef);
            };
        /**
         * @return {?}
         */
        NgWormholeDirective.prototype.ngAfterViewInit = /**
         * @return {?}
         */
            function () {
                this.appendToDestination();
                this.initialized = true;
            };
        /**
         * @param {?} changes
         * @return {?}
         */
        NgWormholeDirective.prototype.ngOnChanges = /**
         * @param {?} changes
         * @return {?}
         */
            function (changes) {
                if (this.initialized) {
                    this.appendToDestination();
                }
            };
        /**
         * @return {?}
         */
        NgWormholeDirective.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                if (this.embeddedViewRef != null) {
                    this.embeddedViewRef.destroy();
                }
            };
        /**
         * @return {?}
         */
        NgWormholeDirective.prototype.appendToDestination = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var startingActiveElement = this.getActiveElement();
                /** @type {?} */
                var destinationElement = this.destinationElement;
                if (destinationElement == null) {
                    return;
                }
                /** @type {?} */
                var content = this.embeddedViewRef.rootNodes.reduce(appendReducer, this.document.createDocumentFragment());
                if (destinationElement.nodeType === Node.COMMENT_NODE) {
                    destinationElement.parentNode.insertBefore(content, destinationElement.nextSibling);
                }
                else {
                    destinationElement.appendChild(content);
                }
                /** @type {?} */
                var resultingActiveElement = this.getActiveElement();
                if (startingActiveElement != null &&
                    resultingActiveElement !== startingActiveElement) {
                    ((startingActiveElement)).focus();
                }
            };
        /**
         * @return {?}
         */
        NgWormholeDirective.prototype.getActiveElement = /**
         * @return {?}
         */
            function () {
                return this.document.activeElement;
            };
        NgWormholeDirective.decorators = [
            { type: core.Directive, args: [{
                        selector: '[ngWormhole]' // tslint:disable-line
                    },] },
        ];
        /** @nocollapse */
        NgWormholeDirective.ctorParameters = function () {
            return [
                { type: core.ViewContainerRef },
                { type: core.TemplateRef },
                { type: undefined, decorators: [{ type: core.Inject, args: [common.DOCUMENT,] }] }
            ];
        };
        NgWormholeDirective.propDecorators = {
            ngWormholeRenderInPlace: [{ type: core.Input }],
            ngWormhole: [{ type: core.Input }]
        };
        return NgWormholeDirective;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var NgWormholeModule = (function () {
        function NgWormholeModule() {
        }
        NgWormholeModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [],
                        declarations: [NgWormholeDirective],
                        exports: [NgWormholeDirective]
                    },] },
        ];
        return NgWormholeModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    exports.NgWormholeDirective = NgWormholeDirective;
    exports.NgWormholeModule = NgWormholeModule;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctd29ybWhvbGUudW1kLmpzLm1hcCIsInNvdXJjZXMiOlsibmc6Ly9uZy13b3JtaG9sZS9saWIvbmctd29ybWhvbGUuZGlyZWN0aXZlLnRzIiwibmc6Ly9uZy13b3JtaG9sZS9saWIvbmctd29ybWhvbGUubW9kdWxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIERpcmVjdGl2ZSxcbiAgSW5wdXQsXG4gIFZpZXdDb250YWluZXJSZWYsXG4gIFRlbXBsYXRlUmVmLFxuICBFbWJlZGRlZFZpZXdSZWYsXG4gIEFmdGVyVmlld0luaXQsXG4gIE9uSW5pdCxcbiAgT25DaGFuZ2VzLFxuICBTaW1wbGVDaGFuZ2VzLFxuICBIb3N0QmluZGluZyxcbiAgSW5qZWN0LFxuICBPbkRlc3Ryb3lcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBET0NVTUVOVCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5cbmZ1bmN0aW9uIGFwcGVuZFJlZHVjZXI8VCBleHRlbmRzIE5vZGU+KHRhcmdldDogVCwgbm9kZTogTm9kZSk6IFQge1xuICB0YXJnZXQuYXBwZW5kQ2hpbGQobm9kZSk7XG5cbiAgcmV0dXJuIHRhcmdldDtcbn1cblxuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiAnW25nV29ybWhvbGVdJyAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lXG59KVxuZXhwb3J0IGNsYXNzIE5nV29ybWhvbGVEaXJlY3RpdmVcbiAgaW1wbGVtZW50cyBBZnRlclZpZXdJbml0LCBPbkluaXQsIE9uQ2hhbmdlcywgT25EZXN0cm95IHtcbiAgQElucHV0KClcbiAgbmdXb3JtaG9sZVJlbmRlckluUGxhY2UgPSBmYWxzZTtcblxuICBASW5wdXQoKVxuICBuZ1dvcm1ob2xlOiBzdHJpbmcgfCBFbGVtZW50O1xuXG4gIHByaXZhdGUgZW1iZWRkZWRWaWV3UmVmOiBFbWJlZGRlZFZpZXdSZWY8YW55PjtcbiAgcHJpdmF0ZSBpbml0aWFsaXplZCA9IGZhbHNlO1xuICBwcml2YXRlIGRvY3VtZW50OiBEb2N1bWVudDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHZpZXdDb250YWluZXJSZWY6IFZpZXdDb250YWluZXJSZWYsXG4gICAgcHJpdmF0ZSB0ZW1wbGF0ZVJlZjogVGVtcGxhdGVSZWY8YW55PixcbiAgICBASW5qZWN0KERPQ1VNRU5UKSBkb2N1bWVudDogYW55XG4gICkge1xuICAgIHRoaXMuZG9jdW1lbnQgPSBkb2N1bWVudDtcbiAgfVxuXG4gIGdldCBkZXN0aW5hdGlvbkVsZW1lbnQoKTogRWxlbWVudCB8IG51bGwge1xuICAgIGlmICh0aGlzLm5nV29ybWhvbGVSZW5kZXJJblBsYWNlKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICB0aGlzLnZpZXdDb250YWluZXJSZWYuZWxlbWVudCAmJlxuICAgICAgICB0aGlzLnZpZXdDb250YWluZXJSZWYuZWxlbWVudC5uYXRpdmVFbGVtZW50XG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5uZ1dvcm1ob2xlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gdHlwZW9mIHRoaXMubmdXb3JtaG9sZSA9PT0gJ3N0cmluZydcbiAgICAgID8gdGhpcy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMubmdXb3JtaG9sZSlcbiAgICAgIDogdGhpcy5uZ1dvcm1ob2xlO1xuICB9XG5cbiAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgdGhpcy5lbWJlZGRlZFZpZXdSZWYgPSB0aGlzLnZpZXdDb250YWluZXJSZWYuY3JlYXRlRW1iZWRkZWRWaWV3KFxuICAgICAgdGhpcy50ZW1wbGF0ZVJlZlxuICAgICk7XG4gIH1cblxuICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XG4gICAgdGhpcy5hcHBlbmRUb0Rlc3RpbmF0aW9uKCk7XG4gICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XG4gIH1cblxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaW5pdGlhbGl6ZWQpIHtcbiAgICAgIHRoaXMuYXBwZW5kVG9EZXN0aW5hdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIGlmICh0aGlzLmVtYmVkZGVkVmlld1JlZiAhPSBudWxsKSB7XG4gICAgICB0aGlzLmVtYmVkZGVkVmlld1JlZi5kZXN0cm95KCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhcHBlbmRUb0Rlc3RpbmF0aW9uKCk6IHZvaWQge1xuICAgIGxldCBzdGFydGluZ0FjdGl2ZUVsZW1lbnQgPSB0aGlzLmdldEFjdGl2ZUVsZW1lbnQoKTtcbiAgICBsZXQgZGVzdGluYXRpb25FbGVtZW50ID0gdGhpcy5kZXN0aW5hdGlvbkVsZW1lbnQ7XG5cbiAgICBpZiAoZGVzdGluYXRpb25FbGVtZW50ID09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgY29udGVudCA9IHRoaXMuZW1iZWRkZWRWaWV3UmVmLnJvb3ROb2Rlcy5yZWR1Y2UoXG4gICAgICBhcHBlbmRSZWR1Y2VyLFxuICAgICAgdGhpcy5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KClcbiAgICApO1xuICAgIGlmIChkZXN0aW5hdGlvbkVsZW1lbnQubm9kZVR5cGUgPT09IE5vZGUuQ09NTUVOVF9OT0RFKSB7XG4gICAgICBkZXN0aW5hdGlvbkVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoXG4gICAgICAgIGNvbnRlbnQsXG4gICAgICAgIGRlc3RpbmF0aW9uRWxlbWVudC5uZXh0U2libGluZ1xuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVzdGluYXRpb25FbGVtZW50LmFwcGVuZENoaWxkKGNvbnRlbnQpO1xuICAgIH1cblxuICAgIGxldCByZXN1bHRpbmdBY3RpdmVFbGVtZW50ID0gdGhpcy5nZXRBY3RpdmVFbGVtZW50KCk7XG4gICAgaWYgKFxuICAgICAgc3RhcnRpbmdBY3RpdmVFbGVtZW50ICE9IG51bGwgJiZcbiAgICAgIHJlc3VsdGluZ0FjdGl2ZUVsZW1lbnQgIT09IHN0YXJ0aW5nQWN0aXZlRWxlbWVudFxuICAgICkge1xuICAgICAgKHN0YXJ0aW5nQWN0aXZlRWxlbWVudCBhcyBIVE1MRWxlbWVudCkuZm9jdXMoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldEFjdGl2ZUVsZW1lbnQoKTogRWxlbWVudCB7XG4gICAgcmV0dXJuIHRoaXMuZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE5nV29ybWhvbGVEaXJlY3RpdmUgfSBmcm9tICcuL25nLXdvcm1ob2xlLmRpcmVjdGl2ZSc7XG5cbkBOZ01vZHVsZSh7XG4gIGltcG9ydHM6IFtdLFxuICBkZWNsYXJhdGlvbnM6IFtOZ1dvcm1ob2xlRGlyZWN0aXZlXSxcbiAgZXhwb3J0czogW05nV29ybWhvbGVEaXJlY3RpdmVdXG59KVxuZXhwb3J0IGNsYXNzIE5nV29ybWhvbGVNb2R1bGUge31cbiJdLCJuYW1lcyI6WyJEaXJlY3RpdmUiLCJWaWV3Q29udGFpbmVyUmVmIiwiVGVtcGxhdGVSZWYiLCJJbmplY3QiLCJET0NVTUVOVCIsIklucHV0IiwiTmdNb2R1bGUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTs7Ozs7O0lBZ0JBLHVCQUF1QyxNQUFTLEVBQUUsSUFBVTtRQUMxRCxNQUFNLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRXpCLE9BQU8sTUFBTSxDQUFDO0tBQ2Y7O1FBaUJDLDZCQUNVLGtCQUNBLGFBQ1UsUUFBYTtZQUZ2QixxQkFBZ0IsR0FBaEIsZ0JBQWdCO1lBQ2hCLGdCQUFXLEdBQVgsV0FBVzsyQ0FYSyxLQUFLOytCQU1ULEtBQUs7WUFRekIsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7U0FDMUI7UUFFRCxzQkFBSSxtREFBa0I7OztnQkFBdEI7Z0JBQ0UsSUFBSSxJQUFJLENB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