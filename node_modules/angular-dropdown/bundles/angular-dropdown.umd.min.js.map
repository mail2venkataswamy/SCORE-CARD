{"version":3,"sources":["ng://angular-dropdown/lib/angular-dropdown-control.directive.ts","ng://angular-dropdown/lib/utils.ts","ng://angular-dropdown/lib/angular-dropdown.directive.ts","ng://angular-dropdown/lib/angular-dropdown-content.component.ts","ng://angular-dropdown/lib/angular-dropdown.module.ts"],"names":["AngularDropdownControlDirective","dropdown","element","this","isDropdownOpen","prototype","onClick","e","stopPropagation","disabled","toggle","ngOnInit","_this","dropdownStateSubscription","isOpen$","subscribe","isOpen","ngOnDestroy","unsubscribe","Directive","args","selector","host","[attr.aria-haspopup]","[attr.aria-controls]","[attr.aria-expanded]","[class.ng-dropdown-control]","[class.active]","AngularDropdownDirective","decorators","type","Host","Inject","forwardRef","ElementRef","HostListener","waitForAnimation","callback","requestAnimationFrame","computedStyle","window","getComputedStyle","animationName","animationPlayState","once","eventName","listener","addEventListener","listenOnce","removeEventListener","closest","Element","el","s","self","i","matches","document","ownerDocument","querySelectorAll","length","item","parentElement","calculatePosition","trigger","_a","horizontalPosition","verticalPosition","matchTriggerWidth","previousHorizontalPosition","previousVerticalPosition","scroll","pageXOffset","pageYOffset","_b","getBoundingClientRect","triggerLeft","left","triggerTop","top","triggerWidth","width","triggerHeight","height","_c","dropdownHeight","dropdownWidth","viewportWidth","innerWidth","style","triggerLeftWithScroll","leftVisible","Math","min","max","rightVisible","right","triggerTopWithScroll","enoughRoomBelow","innerHeight","enoughRoomAbove","calculateInPlacePosition","dropdownRect","positionData","triggerRect","viewportRight","_id","EmptyDropdownContentPosition","Object","freeze","vPosition","hPosition","bottom","id","renderInPlace","control","_isOpen$","BehaviorSubject","pipe","skip","position$","beforeOpen","beforeClose","onOpen","filter","open","onClose","uniqueId","reposition","getValue","dropdownElement","triggerElement","_calculatePosition","options","applyReposition","initializeId","createDefaultWormholeOutlet","defineProperty","nativeElement","getElementById","dropdownId","ngOnChanges","firstChange","currentValue","previousValue","disable","open$","of","result","Observable","first","next","close","skipFocus","close$","assign","HTMLElement","tabIndex","focus","enable","positions","changes","keys","forEach","k","generateDropdownId","outlet","createElement","body","insertBefore","firstChild","[class.render-in-place]","[class.ng-dropdown]","exportAs","DOCUMENT","Attribute","Input","ContentChild","Output","AngularDropdownContentComponent","MutationObserver","zone","dropdownClass","overlay","hasMoved","_animationClass","isTouchDevice","mutationObserver","destroy$","Subject","transitioningInClass","transitionedInClass","transitioningOutClass","shouldOpen","repositionInZone","run","handleRootMouseDown","target","contains","closestDropdown","querySelector","getAttribute","parentDropdown","touchStartHandler","touchMoveHandler","takeUntil","className","classList","remove","add","ngAfterViewChecked","animationClass","teardownEvents","startObservingDomMutations","addGlobalEvents","animateIn","animateOut","clone","cloneNode","appendChild","removeChild","undefined","mutations","addedNodes","removedNodes","observe","childList","subtree","stopObservingDomMutations","disconnect","removeGlobalEvents","Component","template","NgZone","AngularDropdownModule","NgModule","imports","CommonModule","NgWormholeModule","declarations","exports"],"mappings":"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","sourcesContent":["import {\n  Directive,\n  ElementRef,\n  Inject,\n  forwardRef,\n  Input,\n  Host,\n  HostListener\n} from '@angular/core';\n\nimport { AngularDropdownDirective }\n  from './angular-dropdown.directive';\nimport { Subscription } from 'rxjs';\n\n@Directive({\n  selector: '[ng-dropdown-control],[ngDropdownControl]',\n  host: {\n    '[attr.aria-haspopup]': 'true',\n    '[attr.aria-controls]': 'dropdown.id',\n    '[attr.aria-expanded]': 'isDropdownOpen',\n    '[class.ng-dropdown-control]': 'true',\n    '[class.active]': 'isDropdownOpen'\n  }\n})\nexport class AngularDropdownControlDirective {\n  isDropdownOpen: boolean = false;\n  dropdownStateSubscription?: Subscription;\n\n  @HostListener('click', [ '$event' ])\n  onClick(e: Event): void {\n    e.stopPropagation();\n\n    if (!this.dropdown.disabled) {\n      this.dropdown.toggle();\n    }\n  }\n\n  constructor(\n      @Host()\n      @Inject(forwardRef(() => AngularDropdownDirective))\n      public dropdown: AngularDropdownDirective,\n      public element: ElementRef) {\n  }\n\n  ngOnInit() {\n    this.dropdownStateSubscription = this.dropdown.isOpen$.subscribe(\n      isOpen => (this.isDropdownOpen = isOpen)\n    );\n  }\n\n  ngOnDestroy(){\n    this.dropdownStateSubscription && this.dropdownStateSubscription.unsubscribe();\n  }\n}\n","export function waitForAnimation(\n  element: Element | null,\n  callback: (e?: Event) => any\n): void {\n  if (element === null) {\n    return;\n  }\n\n  requestAnimationFrame(() => {\n    const computedStyle = window.getComputedStyle(element);\n\n    if (\n      computedStyle.animationName !== 'none' &&\n      computedStyle.animationPlayState === 'running'\n    ) {\n      return once(element, 'animationend', callback);\n    }\n\n    callback();\n  });\n}\n\nfunction once(\n  element: Node,\n  eventName: string,\n  listener: (e: Event) => any\n): void {\n  element.addEventListener(eventName, function listenOnce(e) {\n    element.removeEventListener(eventName, listenOnce);\n\n    return listener(e);\n  });\n}\n\nexport const closest: (element: Element, selector: string) => Element | null =\n  typeof Element != 'undefined' && Element.prototype.closest\n    ? (el, s) => el.closest(s)\n    : function _closest(self: Element, s: string) {\n        const matches = (\n          (self as any).document || self.ownerDocument\n        ).querySelectorAll(s);\n        let i;\n        let el: Element | null = self;\n        do {\n          i = matches.length;\n          while (--i >= 0 && matches.item(i) !== el) {}\n        } while (i < 0 && (el = el.parentElement));\n        return el;\n      };\n\nexport function calculatePosition(\n  trigger: Element,\n  dropdown: Element,\n  {\n    horizontalPosition,\n    verticalPosition,\n    matchTriggerWidth,\n    previousHorizontalPosition,\n    previousVerticalPosition\n  }: any\n): any {\n  // Collect information about all the involved DOM elements\n  const scroll = { left: window.pageXOffset, top: window.pageYOffset };\n  const {\n    left: triggerLeft,\n    top: triggerTop,\n    width: triggerWidth,\n    height: triggerHeight\n  } = trigger.getBoundingClientRect();\n  let {\n    height: dropdownHeight,\n    width: dropdownWidth\n  } = dropdown.getBoundingClientRect();\n  const viewportWidth = window.innerWidth;\n  const style: any = {};\n\n  // Calculate drop down width\n  dropdownWidth = matchTriggerWidth ? triggerWidth : dropdownWidth;\n  if (matchTriggerWidth) {\n    style.width = dropdownWidth;\n  }\n\n  // Calculate horizontal position\n  const triggerLeftWithScroll = triggerLeft + scroll.left;\n  if (horizontalPosition === 'auto') {\n    // Calculate the number of visible horizontal pixels if we were to place the\n    // dropdown on the left and right\n    const leftVisible =\n      Math.min(viewportWidth, triggerLeft + dropdownWidth) -\n      Math.max(0, triggerLeft);\n    const rightVisible =\n      Math.min(viewportWidth, triggerLeft + triggerWidth) -\n      Math.max(0, triggerLeft + triggerWidth - dropdownWidth);\n\n    if (dropdownWidth > leftVisible && rightVisible > leftVisible) {\n      // If the drop down won't fit left-aligned, and there is more space on the\n      // right than on the left, then force right-aligned\n      horizontalPosition = 'right';\n    } else if (dropdownWidth > rightVisible && leftVisible > rightVisible) {\n      // If the drop down won't fit right-aligned, and there is more space on\n      // the left than on the right, then force left-aligned\n      horizontalPosition = 'left';\n    } else {\n      // Keep same position as previous\n      horizontalPosition = previousHorizontalPosition || 'left';\n    }\n  }\n  if (horizontalPosition === 'right') {\n    style.right = viewportWidth - (triggerLeftWithScroll + triggerWidth);\n  } else if (horizontalPosition === 'center') {\n    style.left = triggerLeftWithScroll + (triggerWidth - dropdownWidth) / 2;\n  } else {\n    style.left = triggerLeftWithScroll;\n  }\n\n  // Calculate vertical position\n  const triggerTopWithScroll = triggerTop + scroll.top;\n  if (verticalPosition === 'above') {\n    style.top = triggerTopWithScroll - dropdownHeight;\n  } else if (verticalPosition === 'below') {\n    style.top = triggerTopWithScroll + triggerHeight;\n  } else {\n    const viewportBottom = scroll.top + self.window.innerHeight;\n    const enoughRoomBelow =\n      triggerTopWithScroll + triggerHeight + dropdownHeight < viewportBottom;\n    const enoughRoomAbove = triggerTop > dropdownHeight;\n\n    if (\n      previousVerticalPosition === 'below' &&\n      !enoughRoomBelow &&\n      enoughRoomAbove\n    ) {\n      verticalPosition = 'above';\n    } else if (\n      previousVerticalPosition === 'above' &&\n      !enoughRoomAbove &&\n      enoughRoomBelow\n    ) {\n      verticalPosition = 'below';\n    } else if (!previousVerticalPosition) {\n      verticalPosition = enoughRoomBelow ? 'below' : 'above';\n    } else {\n      verticalPosition = previousVerticalPosition;\n    }\n    style.top =\n      triggerTopWithScroll +\n      (verticalPosition === 'below' ? triggerHeight : -dropdownHeight);\n  }\n\n  return { horizontalPosition, verticalPosition, style };\n}\n\nexport function calculateInPlacePosition(\n  trigger: Element,\n  dropdown: Element,\n  { horizontalPosition, verticalPosition }: any\n) {\n  let dropdownRect;\n  const positionData: any = {};\n\n  if (horizontalPosition === 'auto') {\n    const triggerRect = trigger.getBoundingClientRect();\n    dropdownRect = dropdown.getBoundingClientRect();\n    const viewportRight = window.pageXOffset + window.innerWidth;\n    positionData.horizontalPosition =\n      triggerRect.left + dropdownRect.width > viewportRight ? 'right' : 'left';\n  }\n  if (verticalPosition === 'above') {\n    positionData.verticalPosition = verticalPosition;\n    dropdownRect = dropdownRect || dropdown.getBoundingClientRect();\n    positionData.style = { top: -dropdownRect.height };\n  }\n  return positionData;\n}\n","import { Observable, BehaviorSubject, of } from 'rxjs';\nimport { skip, first, filter } from 'rxjs/operators';\n\nimport {\n  Component,\n  Directive,\n  Attribute,\n  Inject,\n  Input,\n  Output,\n  ElementRef,\n  AfterViewInit,\n  OnChanges,\n  ContentChild,\n  SimpleChanges,\n  EventEmitter,\n  QueryList,\n  ViewContainerRef,\n  forwardRef\n} from '@angular/core';\n\nimport { DOCUMENT } from '@angular/common';\n\nimport { AngularDropdownControlDirective } from './angular-dropdown-control.directive';\nimport { AngularDropdownContentComponent } from './angular-dropdown-content.component';\n\nimport { calculatePosition, calculateInPlacePosition } from './utils';\n\nexport interface AngularDropdownPositionChanges {\n  vPosition: 'above' | 'below';\n  hPosition: 'right' | 'center' | 'left';\n}\n\nlet _id = 1;\nfunction generateDropdownId() {\n  return _id++;\n}\n\nexport type VerticalPosition = 'auto' | 'above' | 'below';\nexport type HorizontalPosition = 'auto' | 'right' | 'center' | 'left';\n\nexport interface DropdownContentPosition {\n  readonly hPosition: HorizontalPosition | null;\n  readonly vPosition: VerticalPosition | null;\n  readonly top: string | null;\n  readonly left: string | null;\n  readonly bottom: string | null;\n  readonly right: string | null;\n}\n\nconst EmptyDropdownContentPosition = Object.freeze({\n  vPosition: null,\n  hPosition: null,\n  top: null,\n  left: null,\n  bottom: null,\n  right: null\n});\n\n@Directive({\n  selector: 'ng-dropdown,[ngDropdown],[ng-dropdown]',\n  host: {\n    '[class.render-in-place]': 'renderInPlace',\n    '[class.ng-dropdown]': 'true'\n  },\n  exportAs: 'ngDropdown'\n})\nexport class AngularDropdownDirective implements OnChanges {\n  id?: string;\n\n  @Input()\n  renderInPlace = false;\n\n  @ContentChild(AngularDropdownControlDirective)\n  control: AngularDropdownControlDirective | null = null;\n\n  previousVerticalPosition: VerticalPosition | null = null;\n  previousHorizontalPosition: HorizontalPosition | null = null;\n  matchTriggerWidth = false;\n\n  private _isOpen$ = new BehaviorSubject(false);\n  isOpen$ = this._isOpen$.pipe(skip(1));\n\n  position$ = new BehaviorSubject<Readonly<DropdownContentPosition>>(\n    EmptyDropdownContentPosition\n  );\n\n  get dropdownId() {\n    return `ng-dropdown-content-${this.uniqueId}`;\n  }\n\n  @Input()\n  calculatePosition: Function = calculatePosition;\n  @Input()\n  calculateInPlacePosition: Function = calculateInPlacePosition;\n\n  @Input()\n  disabled = false;\n\n  @Input()\n  beforeOpen: (() => boolean | Observable<boolean>) | null = null;\n\n  @Input()\n  beforeClose: (() => boolean | Observable<boolean>) | null = null;\n\n  @Input()\n  public verticalPosition: VerticalPosition = 'auto';\n  @Input()\n  public horizontalPosition: HorizontalPosition = 'auto';\n\n  @Output('open')\n  onOpen = this.isOpen$.pipe(filter(open => open === true));\n\n  @Output('close')\n  onClose = this.isOpen$.pipe(filter(open => open === false));\n\n  get triggerElement(): HTMLElement | null {\n    return this.control && this.control.element.nativeElement;\n  }\n\n  get dropdownElement(): HTMLElement | null {\n    return this.document.getElementById(this.dropdownId);\n  }\n\n  @ContentChild(forwardRef(() => AngularDropdownContentComponent))\n  private dropdownContent?: AngularDropdownContentComponent;\n\n  private uniqueId: number | string | null = null;\n  private width: number | null = null;\n  private document: Document;\n\n  constructor(@Inject(DOCUMENT) document: any, @Attribute('id') id?: string) {\n    this.document = document;\n    this.initializeId(id);\n    this.createDefaultWormholeOutlet();\n  }\n\n  ngOnChanges({ disabled }: SimpleChanges): void {\n    if (\n      disabled &&\n      disabled.firstChange === false &&\n      disabled.currentValue === true &&\n      disabled.previousValue !== true\n    ) {\n      this.disable();\n    }\n  }\n\n  open(): void {\n    if (this.disabled || this._isOpen$.getValue()) {\n      return;\n    }\n\n    let open$ = of(true);\n\n    if (this.beforeOpen) {\n      const result = this.beforeOpen();\n      open$ = result instanceof Observable ? result : of(result);\n    }\n\n    open$\n      .pipe(\n        first(),\n        filter(open => open === true)\n      )\n      .subscribe(() => this._isOpen$.next(true));\n  }\n\n  close(skipFocus = false): void {\n    if (this.disabled || !this._isOpen$.getValue()) {\n      return;\n    }\n\n    let close$ = of(true);\n\n    if (this.beforeClose) {\n      const result = this.beforeClose();\n      close$ = result instanceof Observable ? result : of(result);\n    }\n\n    close$\n      .pipe(\n        first(),\n        filter(close => close === true)\n      )\n      .subscribe(() => {\n        Object.assign(this, {\n          hPosition: null,\n          vPosition: null,\n          top: null,\n          right: null,\n          bottom: null,\n          left: null,\n          width: null,\n          previousVerticalPosition: null,\n          previousHorizontalPosition: null\n        });\n        this._isOpen$.next(false);\n\n        if (!skipFocus) {\n          if (\n            this.triggerElement instanceof HTMLElement &&\n            this.triggerElement.tabIndex > -1\n          ) {\n            this.triggerElement.focus();\n          }\n        }\n      });\n  }\n\n  toggle(): void {\n    if (this._isOpen$.getValue()) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n\n  disable(): void {\n    this.disabled = true;\n    this.close();\n  }\n\n  enable(): void {\n    this.disabled = false;\n  }\n\n  reposition = (): AngularDropdownPositionChanges | null => {\n    if (!this._isOpen$.getValue()) {\n      return null;\n    }\n\n    const dropdownElement = this.dropdownElement;\n    if (!dropdownElement || !this.triggerElement) {\n      return null;\n    }\n\n    const _calculatePosition = this.renderInPlace\n      ? this.calculateInPlacePosition\n      : this.calculatePosition;\n\n    const options = {\n      horizontalPosition: this.horizontalPosition,\n      verticalPosition: this.verticalPosition,\n      matchTriggerWidth: this.matchTriggerWidth,\n      previousHorizontalPosition: this.previousHorizontalPosition,\n      previousVerticalPosition: this.previousVerticalPosition\n    };\n\n    const positionData = _calculatePosition(\n      this.triggerElement,\n      dropdownElement,\n      options\n    );\n\n    return this.applyReposition(\n      this.triggerElement,\n      dropdownElement,\n      positionData\n    );\n  };\n\n  private applyReposition(\n    trigger: Element,\n    dropdown: HTMLElement,\n    positions: any\n  ): AngularDropdownPositionChanges {\n    const changes: any = {\n      hPosition: positions.horizontalPosition,\n      vPosition: positions.verticalPosition\n    };\n    if (positions.style) {\n      changes.top = `${positions.style.top}px`;\n      // The component can be aligned from the right or from the left, but not from both.\n      if (positions.style.left != null) {\n        changes.left = `${positions.style.left}px`;\n        changes.right = null;\n      } else if (positions.style.right != null) {\n        changes.right = `${positions.style.right}px`;\n        changes.left = null;\n      }\n      if (positions.style.width != null) {\n        changes.width = `${positions.style.width}px`;\n      }\n      if (this.position$.getValue().top == null) {\n        // Bypass on the first reposition only to avoid flickering.\n        Object.keys(positions.style).forEach(\n          k => (dropdown.style[k as any] = positions.style[k])\n        );\n      }\n    }\n\n    this.position$.next(changes);\n\n    this.previousHorizontalPosition = positions.horizontalPosition;\n    this.previousVerticalPosition = positions.verticalPosition;\n\n    return changes;\n  }\n\n  private initializeId(id?: string): void {\n    if (id) {\n      this.id = this.uniqueId = id;\n    } else {\n      this.uniqueId = generateDropdownId();\n      this.id = `ng-dropdown-${this.uniqueId}`;\n    }\n  }\n\n  private createDefaultWormholeOutlet(): void {\n    if (!this.document.getElementById('ng-dropdown-outlet')) {\n      const outlet = this.document.createElement('div');\n      outlet.id = 'ng-dropdown-outlet';\n      this.document.body.insertBefore(outlet, this.document.body.firstChild);\n    }\n  }\n}\n","import { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\nimport {\n  Component,\n  Input,\n  Host,\n  Inject,\n  forwardRef,\n  AfterViewChecked,\n  OnInit,\n  OnDestroy,\n  NgZone\n} from '@angular/core';\n\nimport { DOCUMENT } from '@angular/common';\n\nimport { AngularDropdownDirective } from './angular-dropdown.directive';\nimport { closest, waitForAnimation } from './utils';\n\nconst MutationObserver = (window as any).MutationObserver;\n\n@Component({\n  selector: 'ng-dropdown-content,[ng-dropdown-content],[ngDropdownContent]',\n  templateUrl: './angular-dropdown-content.component.html',\n  styleUrls: ['./angular-dropdown-content.component.css'],\n  host: {\n    '[class.render-in-place]': 'dropdown.renderInPlace'\n  }\n})\nexport class AngularDropdownContentComponent\n  implements OnInit, AfterViewChecked, OnDestroy {\n  @Input()\n  dropdownClass = '';\n\n  @Input()\n  overlay = false;\n\n  private hasMoved = false;\n  private _animationClass: string | null = null;\n  private isTouchDevice: boolean = 'ontouchstart' in window;\n  private mutationObserver: MutationObserver | null = null;\n  private destroy$ = new Subject<void>();\n\n  @Input()\n  transitioningInClass = 'ng-dropdown-content--transitioning-in';\n  @Input()\n  transitionedInClass = 'ng-dropdown-content--transitioned-in';\n  @Input()\n  transitioningOutClass = 'ng-dropdown-content--transitioning-out';\n\n  private get dropdownElement(): HTMLElement | null {\n    return this.dropdown.dropdownElement;\n  }\n\n  private shouldOpen = false;\n  private document: Document;\n\n  constructor(\n    @Host()\n    @Inject(forwardRef(() => AngularDropdownDirective))\n    public dropdown: AngularDropdownDirective,\n    private zone: NgZone,\n    @Inject(DOCUMENT) document: any\n  ) {\n    this.document = document;\n  }\n\n  ngOnInit(): void {\n    this.dropdown.onOpen\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(() => (this.shouldOpen = true));\n\n    this.dropdown.onClose\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(() => this.close());\n  }\n\n  set animationClass(className: string | null) {\n    if (this.dropdownElement !== null) {\n      if (this._animationClass && className !== this._animationClass) {\n        this.dropdownElement.classList.remove(this._animationClass);\n      } else if (className) {\n        this.dropdownElement.classList.add(className);\n      }\n    }\n    this._animationClass = className;\n  }\n\n  get animationClass(): string | null {\n    return this._animationClass;\n  }\n\n  get triggerElement(): Element | null {\n    return this.dropdown.triggerElement;\n  }\n\n  ngAfterViewChecked() {\n    if (this.shouldOpen) {\n      this.animationClass = this.transitioningInClass;\n      requestAnimationFrame(() => this.open());\n      this.shouldOpen = false;\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.teardownEvents();\n  }\n\n  open(): void {\n    this.document.body.addEventListener(\n      'mousedown',\n      this.handleRootMouseDown,\n      true\n    );\n\n    if (this.isTouchDevice) {\n      this.document.body.addEventListener(\n        'touchstart',\n        this.touchStartHandler,\n        true\n      );\n      this.document.body.addEventListener(\n        'touchend',\n        this.handleRootMouseDown,\n        true\n      );\n    }\n\n    const changes = this.dropdown.reposition();\n    if (!this.dropdown.renderInPlace) {\n      this.addGlobalEvents();\n      this.startObservingDomMutations();\n    } else if (changes !== null && changes.vPosition === 'above') {\n      this.startObservingDomMutations();\n    }\n\n    requestAnimationFrame(() => this.animateIn());\n  }\n\n  close(): void {\n    this.teardownEvents();\n    this.animateOut();\n  }\n\n  private repositionInZone = () =>\n    this.zone.run(() => this.dropdown.reposition());\n\n  private animateIn(): void {\n    waitForAnimation(this.dropdownElement, () => {\n      this.animationClass = this.transitionedInClass;\n    });\n  }\n\n  private animateOut(): void {\n    if (this.dropdownElement === null) {\n      return;\n    }\n\n    const parentElement = this.dropdown.renderInPlace\n      ? this.dropdownElement.parentElement!.parentElement!\n      : this.dropdownElement.parentElement!;\n    const clone = this.dropdownElement.cloneNode(true) as HTMLElement;\n    clone.id = `${this.dropdownElement.id}--clone`;\n    clone.classList.remove(this.transitionedInClass);\n    clone.classList.remove(this.transitioningInClass);\n    clone.classList.add(this.transitioningOutClass);\n    parentElement.appendChild(clone);\n    this.animationClass = this.transitioningInClass;\n    waitForAnimation(clone, () => parentElement.removeChild(clone));\n  }\n\n  private handleRootMouseDown = (e: Event): void => {\n    const { target } = e as Event & { target: Element };\n\n    if (\n      this.hasMoved ||\n      (this.dropdownElement !== null &&\n        this.dropdownElement.contains(target)) ||\n      (this.triggerElement !== null && this.triggerElement.contains(target))\n    ) {\n      this.hasMoved = false;\n      return;\n    }\n\n    const closestDropdown = closest(target, 'ng-dropdown-content');\n    if (closestDropdown !== null) {\n      const trigger = this.document.querySelector(\n        `[aria-controls=${closestDropdown.getAttribute('id')}]`\n      );\n      const parentDropdown = closest(trigger!, 'ng-dropdown-content');\n      if (\n        parentDropdown !== null &&\n        parentDropdown.getAttribute('id') === this.dropdown.dropdownId\n      ) {\n        this.hasMoved = false;\n        return;\n      }\n    }\n\n    this.dropdown.close(true);\n  };\n\n  private startObservingDomMutations(): void {\n    if (MutationObserver !== undefined) {\n      this.mutationObserver = new MutationObserver((mutations: any) => {\n        if (\n          mutations[0].addedNodes.length ||\n          mutations[0].removedNodes.length\n        ) {\n          this.repositionInZone();\n        }\n      });\n      this.mutationObserver!.observe(this.dropdownElement!, {\n        childList: true,\n        subtree: true\n      });\n    } else {\n      this.dropdownElement!.addEventListener(\n        'DOMNodeInserted',\n        this.repositionInZone,\n        false\n      );\n      this.dropdownElement!.addEventListener(\n        'DOMNodeRemoved',\n        this.repositionInZone,\n        false\n      );\n    }\n  }\n\n  private stopObservingDomMutations(): void {\n    if (MutationObserver) {\n      if (this.mutationObserver) {\n        this.mutationObserver.disconnect();\n        this.mutationObserver = null;\n      }\n    } else {\n      if (this.dropdownElement !== null) {\n        this.dropdownElement.removeEventListener(\n          'DOMNodeInserted',\n          this.repositionInZone\n        );\n        this.dropdownElement.removeEventListener(\n          'DOMNodeRemoved',\n          this.repositionInZone\n        );\n      }\n    }\n  }\n\n  private addGlobalEvents(): void {\n    window.addEventListener('scroll', this.repositionInZone);\n    window.addEventListener('resize', this.repositionInZone);\n    window.addEventListener('orientationchange', this.repositionInZone);\n  }\n\n  private removeGlobalEvents(): void {\n    window.removeEventListener('scroll', this.repositionInZone);\n    window.removeEventListener('resize', this.repositionInZone);\n    window.removeEventListener('orientationchange', this.repositionInZone);\n  }\n\n  private touchStartHandler = (e: Event) => {\n    this.document.body.addEventListener(\n      'touchmove',\n      this.touchMoveHandler,\n      true\n    );\n  };\n\n  private touchMoveHandler = (e: Event) => {\n    this.hasMoved = true;\n    this.document.body.removeEventListener(\n      'touchmove',\n      this.touchMoveHandler,\n      true\n    );\n  };\n\n  private teardownEvents() {\n    this.removeGlobalEvents();\n    this.stopObservingDomMutations();\n    this.document.body.removeEventListener(\n      'mousedown',\n      this.handleRootMouseDown,\n      true\n    );\n\n    if (this.isTouchDevice) {\n      this.document.body.removeEventListener(\n        'touchstart',\n        this.touchStartHandler,\n        true\n      );\n      this.document.body.removeEventListener(\n        'touchend',\n        this.handleRootMouseDown,\n        true\n      );\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { NgWormholeModule } from 'ng-wormhole';\n\nimport { AngularDropdownDirective } from './angular-dropdown.directive';\nimport { AngularDropdownContentComponent } from './angular-dropdown-content.component';\nimport { AngularDropdownControlDirective } from './angular-dropdown-control.directive';\n\n@NgModule({\n  imports: [CommonModule, NgWormholeModule],\n  declarations: [\n    AngularDropdownDirective,\n    AngularDropdownControlDirective,\n    AngularDropdownContentComponent\n  ],\n  exports: [\n    AngularDropdownDirective,\n    AngularDropdownControlDirective,\n    AngularDropdownContentComponent\n  ]\n})\nexport class AngularDropdownModule {}\n"]}